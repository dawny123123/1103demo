# 订单管理系统 - 使用说明

## 项目概述

这是一个完整的全栈订单管理系统，包含：
- **后端**: Spring Boot REST API (端口: 8080)
- **前端**: React Web应用 (端口: 3000)
- **数据库**: SQLite

## 已启动的服务

### 后端服务 (已运行)
- 地址: http://localhost:8080
- API基础路径: /api/orders

### 前端服务 (已运行)
- 地址: http://localhost:3000
- 点击工具面板的按钮即可查看前端页面

## API接口文档

### 1. 健康检查
```
GET /api/orders/health
```

### 2. 创建订单
```
POST /api/orders
Content-Type: application/json

{
  "orderId": "ORD001",
  "userId": "USER001", 
  "productId": "PROD001",
  "quantity": 2,
  "totalAmount": 199.98,
  "status": 0
}
```

### 3. 查询订单详情
```
GET /api/orders/{orderId}
```

### 4. 根据用户ID查询订单列表
```
GET /api/orders/user/{userId}
```

### 5. 更新订单
```
PUT /api/orders/{orderId}
Content-Type: application/json

{
  "userId": "USER001",
  "productId": "PROD001", 
  "quantity": 3,
  "totalAmount": 299.97,
  "status": 1
}
```

### 6. 删除订单
```
DELETE /api/orders/{orderId}
```

## 订单状态说明

- 0: 待支付
- 1: 已支付
- 2: 已发货
- 3: 已完成
- 4: 已取消

## 前端功能

### 订单创建
1. 填写订单ID、用户ID、商品ID
2. 输入数量和总金额
3. 选择订单状态
4. 点击"创建订单"按钮

### 订单查询
1. 在搜索栏输入用户ID
2. 点击"查询"按钮
3. 查看该用户的所有订单

### 订单管理
- **支付**: 待支付订单可以点击"支付"按钮
- **发货**: 已支付订单可以点击"发货"按钮
- **完成**: 已发货订单可以点击"完成"按钮
- **删除**: 仅待支付订单可以删除

## 业务规则

1. **创建订单**:
   - 数量必须大于0
   - 金额必须大于0

2. **删除订单**:
   - 只有待支付(status=0)的订单可以删除
   - 已支付的订单不能删除

3. **更新订单**:
   - 已完成的订单不能修改

## 快速测试流程

1. **创建测试订单**:
   - 订单ID: ORD001
   - 用户ID: USER001
   - 商品ID: PROD001
   - 数量: 2
   - 总金额: 199.98

2. **查询订单**:
   - 输入用户ID: USER001
   - 点击查询

3. **更新订单状态**:
   - 点击"支付"按钮
   - 再点击"发货"按钮
   - 最后点击"完成"按钮

4. **创建新订单并删除**:
   - 创建一个新订单(待支付状态)
   - 点击"删除"按钮测试删除功能

## 项目结构

```
├── src/main/java/com/example/demo/
│   ├── App.java                    # Spring Boot主启动类
│   ├── controller/
│   │   └── OrderController.java   # REST API控制器
│   ├── service/
│   │   └── OrderService.java      # 业务逻辑层
│   ├── dao/
│   │   ├── OrderDAO.java          # 数据访问层
│   │   └── DBUtil.java            # 数据库工具类
│   ├── entity/
│   │   └── Order.java             # 订单实体类
│   └── config/
│       └── WebConfig.java         # Web配置(CORS)
├── frontend/
│   ├── src/
│   │   ├── App.js                 # 主应用组件
│   │   ├── App.css                # 样式文件
│   │   └── services/
│   │       └── orderService.js    # API服务封装
│   └── public/
└── orders.db                       # SQLite数据库文件
```

## 停止服务

### 停止后端
在终端按 `Ctrl + C`

### 停止前端  
在前端终端按 `Ctrl + C`

## 注意事项

1. 确保8080和3000端口未被占用
2. 数据会持久化保存在 `orders.db` 文件中
3. 前端和后端需同时运行才能正常工作
4. 已配置CORS支持跨域访问
