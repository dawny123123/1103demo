---
trigger: manual
---
【目标需求】
帮我把用户输入的**需求文档**转为技术方案文档，以便用于AI理解和编码。
【任务清单】
1. 根据用户**需求文档**及DDD领域建模思想，整体分析并按照领域归属合理划分三层架构的各模块功能：
   * 业务实体：对应三层架构的数据层，包括实体、实体关系。
   * 领域功能：对应三层架构的业务逻辑层，职责：封装领域内业务逻辑和业务规则，沉淀业务知识，遵守领域内开闭原则。
   * 应用服务：对应三层架构的应用层，职责：调用领域服务，跨领域组装业务流程，模型转换，必要的参数校验、事务及异常处理。
2. 分析并描述清楚_业务实体_的客观实体、实体之间的关系以及实体的属性，务必按照*实体建模要求*进行建模。
3. 分析并描述清楚_领域功能_的各领域的模块功能的输入和输出、业务逻辑以及业务规则约束。
4. 分析并描述清楚_应用服务_的各领域的模块功能的输入和输出、业务流程以及校验约束。
5. 参照**Demo新增类-技术方案**文档格式，产出AI能理解的技术方案文档，命名为 xxx-技术方案。 
【具体要求】
1. 实体建模要求：
   * 规范与性能平衡：建模遵从 数据库3FN 范式，必要时可以进行字段冗余减少关联查询。
   * 稳定且可扩展：充分考虑业务需求的功能及未来变化，设计稳定且可扩展的领域模型。
   * 实体与关系解耦：多实体之间的关系按照如下原则建模：
     * 如果多个实体之间存在直接约束关系，比如相同门店相同类目下只能有一条规则，则只需要使用一个包含门店ID、类目ID、规则ID的实体关系进行关系建模，禁止拆分多个实体关系。
     * 如果只是两个实体之间的约束关系，比如一个商户可以签约多个服务包，一个服务包可以包含多个配送范围，则需要使用两个实体关系进行关系建模。
2. 领域划分要求：同类功能划分为同一个领域，比如与规则相关的功能都属于同一个规则领域。
3. 不重不漏：_领域功能_和_应用服务_的功能及约束不要重复描述，也不要有遗漏。
4. 服务依赖要求：**需求文档**中没有提供依赖服务信息时，服务依赖章节内容可省略；否则，则需要描述清楚服务依赖。
5. 额外要求：充分理解并分析**需求文档**，在技术方案末尾增加 技术实现要点、风险评估、测试用例 章节。
   * 技术实现要点：包括关键业务逻辑、关键业务规则、数据一致性、扩展性、可维护性等。
   * 风险评估：包括性能风险、并发风险、资损风险、依赖稳定性风险、安全风险等。
   * 测试用例：包括功能测试、非功能测试（比如性能测试、兼容性测试、可靠性测试等）。用例覆盖要全面，不同测试用例用序号标注，并描述清楚在什么情况下执行怎样的操作，预期结果是什么。
   * 说明：技术实现要点、风险评估、测试用例章节内容要详细、清晰且覆盖全面。
6. 严格根据用户输入的**需求文档**进行分析，禁止编造不存在的内容。不确定的内容及时请求人类的帮助，提示并等待人类的输入。 
7. 先描述分析的内容，再使用中文生成符合要求的技术方案。
【交付物】
符合上述要求的技术方案文档。
