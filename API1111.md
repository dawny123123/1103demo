# 订单管理系统API接口文档

## 1. 概述

本文档定义了订单管理系统的RESTful API接口规范，包括请求/响应格式、参数说明和业务规则。

## 2. 服务接口定义

### 2.1 OrderServiceI 接口

订单服务接口，提供订单的增删改查等核心业务功能。

```java
package com.example.demo.service;

import com.example.demo.dto.OrderCreateRequest;
import com.example.demo.dto.OrderUpdateRequest;
import com.example.demo.dto.OrderDTO;
import com.example.demo.dto.SingleResult;
import java.util.List;

/**
 * 订单服务接口
 * 负责处理订单相关的业务逻辑
 */
public interface OrderServiceI {
    
    /**
     * 创建订单
     * @param request 订单创建请求参数
     * @return 创建结果，包含订单信息
     */
    SingleResult<OrderDTO> createOrder(OrderCreateRequest request);
    
    /**
     * 获取订单详情
     * @param orderId 订单ID
     * @return 订单详情
     */
    SingleResult<OrderDTO> getOrder(String orderId);
    
    /**
     * 更新订单信息
     * @param request 订单更新请求参数
     * @return 更新结果
     */
    SingleResult<Boolean> updateOrder(OrderUpdateRequest request);
    
    /**
     * 删除订单
     * @param orderId 订单ID
     * @return 删除结果
     */
    SingleResult<Boolean> deleteOrder(String orderId);
    
    /**
     * 获取所有订单列表
     * @return 订单列表
     */
    SingleResult<List<OrderDTO>> getAllOrders();
    
    /**
     * 根据用户ID获取订单列表
     * @param userId 用户ID
     * @return 该用户的所有订单列表
     */
    SingleResult<List<OrderDTO>> getOrdersByUserId(String userId);
}
```

## 3. 参数类定义

### 3.1 OrderCreateRequest 入参类

订单创建请求参数类。

```java
package com.example.demo.dto;

import lombok.Data;
import java.io.Serializable;
import java.math.BigDecimal;
import java.util.Date;

/**
 * 订单创建请求参数
 */
@Data
public class OrderCreateRequest implements Serializable {
    
    /**
     * 订单唯一标识
     */
    private String orderId;
    
    /**
     * 用户ID
     */
    private String userId;
    
    /**
     * 商品ID
     */
    private String productId;
    
    /**
     * 购买数量
     */
    private Integer quantity;
    
    /**
     * 订单总金额
     */
    private BigDecimal totalAmount;
    
    /**
     * 订单状态: 0-待支付, 1-已支付, 2-已发货, 3-已完成, 4-已取消
     */
    private Integer status;
    
    /**
     * 订单描述
     */
    private String description;
    
    /**
     * 主键
     */
    private Long id;
    
    /**
     * 创建时间
     */
    private Date gmtCreate;
    
    /**
     * 修改时间
     */
    private Date gmtModified;
}
```

### 3.2 OrderUpdateRequest 入参类

订单更新请求参数类。

```java
package com.example.demo.dto;

import lombok.Data;
import java.io.Serializable;
import java.math.BigDecimal;
import java.util.Date;

/**
 * 订单更新请求参数
 */
@Data
public class OrderUpdateRequest implements Serializable {
    
    /**
     * 订单唯一标识
     */
    private String orderId;
    
    /**
     * 用户ID
     */
    private String userId;
    
    /**
     * 商品ID
     */
    private String productId;
    
    /**
     * 购买数量
     */
    private Integer quantity;
    
    /**
     * 订单总金额
     */
    private BigDecimal totalAmount;
    
    /**
     * 订单状态: 0-待支付, 1-已支付, 2-已发货, 3-已完成, 4-已取消
     */
    private Integer status;
    
    /**
     * 订单描述
     */
    private String description;
    
    /**
     * 主键
     */
    private Long id;
    
    /**
     * 创建时间
     */
    private Date gmtCreate;
    
    /**
     * 修改时间
     */
    private Date gmtModified;
}
```

## 4. 出参类定义

### 4.1 OrderDTO 出参类

订单信息数据传输对象。

```java
package com.example.demo.dto;

import lombok.Data;
import java.io.Serializable;
import java.math.BigDecimal;
import java.util.Date;

/**
 * 订单信息DTO
 */
@Data
public class OrderDTO implements Serializable {
    
    /**
     * 订单唯一标识
     */
    private String orderId;
    
    /**
     * 用户ID
     */
    private String userId;
    
    /**
     * 商品ID
     */
    private String productId;
    
    /**
     * 购买数量
     */
    private Integer quantity;
    
    /**
     * 订单总金额
     */
    private BigDecimal totalAmount;
    
    /**
     * 订单状态: 0-待支付, 1-已支付, 2-已发货, 3-已完成, 4-已取消
     */
    private Integer status;
    
    /**
     * 订单描述
     */
    private String description;
    
    /**
     * 创建时间
     */
    private Date createTime;
    
    /**
     * 支付时间
     */
    private Date payTime;
    
    /**
     * 更新时间
     */
    private Date updateTime;
    
    /**
     * 主键
     */
    private Long id;
    
    /**
     * 创建时间
     */
    private Date gmtCreate;
    
    /**
     * 修改时间
     */
    private Date gmtModified;
}
```

### 4.2 SingleResult 出参包装类

单个结果包装类。

```java
package com.example.demo.dto;

import lombok.Data;
import java.io.Serializable;

/**
 * 单个结果包装类
 */
@Data
public class SingleResult<T> implements Serializable {
    
    /**
     * 是否成功
     */
    private Boolean success;
    
    /**
     * 返回数据
     */
    private T data;
    
    /**
     * 错误信息
     */
    private String message;
}
```

## 5. API端点说明

### 5.1 创建订单
```
POST /api/orders
Content-Type: application/json

请求体:
{
  "orderId": "订单ID",
  "userId": "用户ID",
  "productId": "商品ID",
  "quantity": 1,
  "totalAmount": 99.99,
  "status": 0,
  "description": "订单描述"
}

响应:
{
  "success": true,
  "data": {
    "orderId": "订单ID",
    "userId": "用户ID",
    "productId": "商品ID",
    "quantity": 1,
    "totalAmount": 99.99,
    "status": 0,
    "description": "订单描述",
    "createTime": "2025-11-11T10:00:00",
    "payTime": null,
    "updateTime": "2025-11-11T10:00:00"
  },
  "message": null
}
```

### 5.2 获取订单详情
```
GET /api/orders/{orderId}

响应:
{
  "success": true,
  "data": {
    "orderId": "订单ID",
    "userId": "用户ID",
    "productId": "商品ID",
    "quantity": 1,
    "totalAmount": 99.99,
    "status": 0,
    "description": "订单描述",
    "createTime": "2025-11-11T10:00:00",
    "payTime": null,
    "updateTime": "2025-11-11T10:00:00"
  },
  "message": null
}
```

### 5.3 更新订单
```
PUT /api/orders/{orderId}
Content-Type: application/json

请求体:
{
  "userId": "用户ID",
  "productId": "商品ID",
  "quantity": 2,
  "totalAmount": 199.98,
  "status": 1,
  "description": "更新后的订单描述"
}

响应:
{
  "success": true,
  "data": true,
  "message": null
}
```

### 5.4 删除订单
```
DELETE /api/orders/{orderId}

响应:
{
  "success": true,
  "data": true,
  "message": "订单删除成功"
}
```

### 5.5 获取所有订单
```
GET /api/orders

响应:
{
  "success": true,
  "data": [
    {
      "orderId": "订单ID1",
      "userId": "用户ID1",
      "productId": "商品ID1",
      "quantity": 1,
      "totalAmount": 99.99,
      "status": 0,
      "description": "订单描述1",
      "createTime": "2025-11-11T10:00:00",
      "payTime": null,
      "updateTime": "2025-11-11T10:00:00"
    },
    {
      "orderId": "订单ID2",
      "userId": "用户ID2",
      "productId": "商品ID2",
      "quantity": 2,
      "totalAmount": 199.98,
      "status": 1,
      "description": "订单描述2",
      "createTime": "2025-11-11T09:00:00",
      "payTime": "2025-11-11T09:30:00",
      "updateTime": "2025-11-11T09:30:00"
    }
  ],
  "message": null
}
```

### 5.6 根据用户ID获取订单列表
```
GET /api/orders/user/{userId}

响应:
{
  "success": true,
  "data": [
    {
      "orderId": "订单ID1",
      "userId": "用户ID",
      "productId": "商品ID1",
      "quantity": 1,
      "totalAmount": 99.99,
      "status": 0,
      "description": "订单描述1",
      "createTime": "2025-11-11T10:00:00",
      "payTime": null,
      "updateTime": "2025-11-11T10:00:00"
    },
    {
      "orderId": "订单ID2",
      "userId": "用户ID",
      "productId": "商品ID2",
      "quantity": 2,
      "totalAmount": 199.98,
      "status": 1,
      "description": "订单描述2",
      "createTime": "2025-11-11T09:00:00",
      "payTime": "2025-11-11T09:30:00",
      "updateTime": "2025-11-11T09:30:00"
    }
  ],
  "message": null
}
```